import{r as b,I as B,ad as v,a5 as N,ae as $,j as t,X as j,af as T,ag as E}from"./vendor-react-DhTDDHjY.js";import{u as k}from"./index-d3VSUkT1.js";let p=[],w=null;const S=50;function y(u,o=null){p.push({eventName:u,eventData:o,timestamp:Date.now()}),w&&clearTimeout(w),w=setTimeout(()=>{const l={};p.forEach(e=>{l[e.eventName]||(l[e.eventName]=[]),l[e.eventName].push(e)}),Object.keys(l).forEach(e=>{l[e];const g=()=>{window.dispatchEvent(new Event(e))};window.requestIdleCallback?window.requestIdleCallback(g,{timeout:100}):requestAnimationFrame(g)}),p=[],w=null},S)}function A(u){const{endpoint:o,primaryKey:l="id",eventName:e=null}=u,[g,s]=b.useState(!1),[r,i]=b.useState(null),c=b.useCallback(async f=>{try{s(!0),i(null);const a=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to create item")}const m=await a.json();return e&&y(e),m}catch(a){throw i(a.message),a}finally{s(!1)}},[o,e]),n=b.useCallback(async(f,a)=>{try{s(!0),i(null);const m=await fetch(`${o}/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!m.ok){const C=await m.json();throw new Error(C.error||"Failed to update item")}const h=await m.json();return e&&y(e),h}catch(m){throw i(m.message),m}finally{s(!1)}},[o,e]),d=b.useCallback(async f=>{try{s(!0),i(null);const a=await fetch(`${o}/${f}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to delete item")}const m=await a.json();return e&&y(e),m}catch(a){throw i(a.message),a}finally{s(!1)}},[o,e]),x=b.useCallback(async f=>{try{s(!0),i(null);const a=await Promise.all(f.map(m=>fetch(`${o}/${m}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(h=>{if(!h.ok)throw new Error(`Failed to delete item ${m}`);return h.json()})));return e&&y(e),a}catch(a){throw i(a.message),a}finally{s(!1)}},[o,e]);return{create:c,update:n,remove:d,bulkDelete:x,loading:g,error:r}}const G=()=>{const[u,o]=b.useState({isOpen:!1,type:"info",title:null,message:"",duration:3e3}),l=b.useCallback((c,n="info",d=null,x=3e3)=>{o({isOpen:!0,type:n,title:d,message:c,duration:x})},[]),e=b.useCallback(()=>{o(c=>({...c,isOpen:!1}))},[]),g=b.useCallback((c,n="Berhasil",d=3e3)=>{l(c,"success",n,d)},[l]),s=b.useCallback((c,n="Error",d=5e3)=>{l(c,"error",n,d)},[l]),r=b.useCallback((c,n="Peringatan",d=4e3)=>{l(c,"warning",n,d)},[l]),i=b.useCallback((c,n="Informasi",d=3e3)=>{l(c,"info",n,d)},[l]);return{alertState:u,showAlert:l,closeAlert:e,success:g,error:s,warning:r,info:i}},I=()=>{const[u,o]=b.useState({isOpen:!1,title:"Konfirmasi",message:"",onConfirm:null,confirmText:"Ya",cancelText:"Batal",type:"warning",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}),l=b.useCallback((s,r,i={})=>{o({isOpen:!0,title:i.title||"Konfirmasi",message:s,onConfirm:r,confirmText:i.confirmText||"Ya",cancelText:i.cancelText||"Batal",type:i.type||"warning",confirmButtonColor:i.confirmButtonColor||"bg-blue-600 hover:bg-blue-700"})},[]),e=b.useCallback(()=>{o(s=>({...s,isOpen:!1,onConfirm:null}))},[]),g=b.useCallback(async()=>{if(u.onConfirm){e();try{await u.onConfirm()}catch{}}else e()},[u,e]);return{confirmState:u,showConfirm:l,closeConfirm:e,handleConfirm:g}},M=({isOpen:u,onClose:o,type:l="info",title:e,message:g,duration:s=3e3})=>{const{isDark:r}=k();if(b.useEffect(()=>{if(u&&s>0){const f=setTimeout(()=>{o()},s);return()=>clearTimeout(f)}},[u,s,o]),!u)return null;const i={dark:{overlay:"bg-black/60",cardBg:"bg-slate-800/95",textMuted:"text-slate-400",closeButton:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"},light:{overlay:"bg-black/40",cardBg:"bg-white/95",textMuted:"text-gray-600",closeButton:"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50"}},c=r?i.dark:i.light,n={success:{icon:$,iconColor:r?"text-green-400":"text-green-600",iconBg:r?"bg-green-500/20":"bg-green-100",borderColor:r?"border-green-500/50":"border-green-300",bgGradient:r?"from-green-500/10 to-emerald-500/5":"from-green-50 to-emerald-50",titleColor:r?"text-green-300":"text-green-700",messageColor:c.textMuted,buttonColor:"bg-green-600 hover:bg-green-700 text-white"},error:{icon:N,iconColor:r?"text-red-400":"text-red-600",iconBg:r?"bg-red-500/20":"bg-red-100",borderColor:r?"border-red-500/50":"border-red-300",bgGradient:r?"from-red-500/10 to-rose-500/5":"from-red-50 to-rose-50",titleColor:r?"text-red-300":"text-red-700",messageColor:c.textMuted,buttonColor:"bg-red-600 hover:bg-red-700 text-white"},warning:{icon:v,iconColor:r?"text-yellow-400":"text-yellow-600",iconBg:r?"bg-yellow-500/20":"bg-yellow-100",borderColor:r?"border-yellow-500/50":"border-yellow-300",bgGradient:r?"from-yellow-500/10 to-amber-500/5":"from-yellow-50 to-amber-50",titleColor:r?"text-yellow-300":"text-yellow-700",messageColor:c.textMuted,buttonColor:"bg-yellow-600 hover:bg-yellow-700 text-white"},info:{icon:B,iconColor:r?"text-blue-400":"text-blue-600",iconBg:r?"bg-blue-500/20":"bg-blue-100",borderColor:r?"border-blue-500/50":"border-blue-300",bgGradient:r?"from-blue-500/10 to-cyan-500/5":"from-blue-50 to-cyan-50",titleColor:r?"text-blue-300":"text-blue-700",messageColor:c.textMuted,buttonColor:"bg-blue-600 hover:bg-blue-700 text-white"}},d=n[l]||n.info,x=d.icon;return t.jsx("div",{className:`fixed inset-0 ${c.overlay} backdrop-blur-sm flex items-center justify-center z-[9999] p-4`,children:t.jsxs("div",{className:`${c.cardBg} bg-gradient-to-br ${d.bgGradient} rounded-2xl border ${d.borderColor} shadow-2xl w-full max-w-md transform transition-all animate-in fade-in zoom-in duration-200`,children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl ${d.iconBg} flex items-center justify-center flex-shrink-0`,children:t.jsx(x,{className:d.iconColor,size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[e&&t.jsx("h3",{className:`text-lg font-bold ${d.titleColor} mb-2`,children:e}),t.jsx("p",{className:`text-sm ${d.messageColor} whitespace-pre-line`,children:g})]}),t.jsx("button",{onClick:o,className:`${c.closeButton} p-1 rounded-lg transition-all flex-shrink-0`,children:t.jsx(j,{size:20})})]})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx("button",{onClick:o,className:`w-full px-4 py-2.5 rounded-xl font-medium transition-all ${d.buttonColor} shadow-lg hover:shadow-xl hover:scale-[1.02]`,children:"OK"})})]})})},O=({isOpen:u,onClose:o,onConfirm:l,title:e="Konfirmasi",message:g,confirmText:s="Ya",cancelText:r="Batal",type:i="warning",confirmButtonColor:c="bg-blue-600 hover:bg-blue-700"})=>{const{isDark:n}=k();if(!u)return null;const d={dark:{overlay:"bg-black/60",cardBg:"bg-slate-800/95",text:"text-slate-200",textMuted:"text-slate-300",closeButton:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50",cancelButton:"bg-slate-700 hover:bg-slate-600 text-slate-200"},light:{overlay:"bg-black/40",cardBg:"bg-white/95",text:"text-gray-900",textMuted:"text-gray-700",closeButton:"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50",cancelButton:"bg-gray-200 hover:bg-gray-300 text-gray-800"}},x=n?d.dark:d.light,f={warning:{icon:v,iconColor:n?"text-yellow-400":"text-yellow-600",iconBg:n?"bg-yellow-500/20":"bg-yellow-100",borderColor:n?"border-yellow-500/50":"border-yellow-300",bgGradient:n?"from-yellow-500/10 to-amber-500/5":"from-yellow-50 to-amber-50",confirmButtonColor:"bg-yellow-600 hover:bg-yellow-700"},danger:{icon:T,iconColor:n?"text-red-400":"text-red-600",iconBg:n?"bg-red-500/20":"bg-red-100",borderColor:n?"border-red-500/50":"border-red-300",bgGradient:n?"from-red-500/10 to-rose-500/5":"from-red-50 to-rose-50",confirmButtonColor:"bg-red-600 hover:bg-red-700"},info:{icon:v,iconColor:n?"text-blue-400":"text-blue-600",iconBg:n?"bg-blue-500/20":"bg-blue-100",borderColor:n?"border-blue-500/50":"border-blue-300",bgGradient:n?"from-blue-500/10 to-cyan-500/5":"from-blue-50 to-cyan-50",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}},a=f[i]||f.warning,m=a.icon,h=i==="danger"||i==="warning"?a.confirmButtonColor:c,C=async()=>{l&&(o(),await l())};return t.jsx("div",{className:`fixed inset-0 ${x.overlay} backdrop-blur-sm flex items-center justify-center z-[9999] p-4`,children:t.jsxs("div",{className:`${x.cardBg} bg-gradient-to-br ${a.bgGradient} rounded-2xl border ${a.borderColor} shadow-2xl w-full max-w-md transform transition-all animate-in fade-in zoom-in duration-200`,children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl ${a.iconBg} flex items-center justify-center flex-shrink-0`,children:t.jsx(m,{className:a.iconColor,size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:`text-lg font-bold ${x.text} mb-2`,children:e}),t.jsx("p",{className:`text-sm ${x.textMuted} whitespace-pre-line`,children:g})]}),t.jsx("button",{onClick:o,className:`${x.closeButton} p-1 rounded-lg transition-all flex-shrink-0`,children:t.jsx(j,{size:20})})]})}),t.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[t.jsxs("button",{onClick:o,className:`flex-1 px-4 py-2.5 rounded-xl font-medium ${x.cancelButton} transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2`,children:[t.jsx(j,{size:18}),r]}),t.jsxs("button",{onClick:C,className:`flex-1 px-4 py-2.5 rounded-xl font-medium text-white transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2 ${h}`,children:[t.jsx(E,{size:18}),s]})]})]})})},F=({size:u="md",message:o=null})=>{const{isDark:l}=k(),e={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-14 h-14 border-4"},g=l?"border-slate-600 border-t-cyan-400":"border-gray-300 border-t-blue-600",s=l?"text-slate-300":"text-gray-700";return t.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[10000] pointer-events-none",children:t.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:`${e[u]} ${g} rounded-full animate-spin`,style:{boxShadow:l?"0 0 20px rgba(34, 211, 238, 0.3)":"0 0 20px rgba(37, 99, 235, 0.3)"}})}),o&&t.jsx("div",{className:`text-sm font-medium ${s} animate-pulse bg-opacity-90 px-3 py-1.5 rounded-lg ${l?"bg-slate-800/90":"bg-white/90"} shadow-lg`,children:o})]})})};export{M as C,F as I,I as a,A as b,O as c,G as u};
